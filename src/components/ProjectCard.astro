---
/**
 * ProjectCard component for displaying project entries
 * Supports optional image and tags
 */
import type { CollectionEntry } from "astro:content";

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props;
const { title, description, pubDate, repository, image, tags } = project.data;

const formattedDate = pubDate.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<article class="bg-off-white rounded-lg border border-olive-drab overflow-hidden">
  {image && (
    <a href={`/projects/${project.id}`} class="block">
      <img
        src={image}
        alt={`${title} project thumbnail`}
        class="w-full h-48 object-cover"
        loading="lazy"
      />
    </a>
  )}

  <div class="p-4">
    <a
      href={`/projects/${project.id}`}
      class="block hover:opacity-80 transition-opacity"
    >
      <h2 class="text-2xl font-bold text-dark-olive mb-2">
        {title}
      </h2>
      <p class="text-near-black mb-2">{description}</p>
      <time datetime={pubDate.toISOString()} class="text-sm text-olive-drab">
        {formattedDate}
      </time>
    </a>

    {tags && tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mt-3">
        {tags.map((tag) => (
          <span class="text-xs font-medium px-2 py-1 rounded-full bg-olive-drab/10 text-dark-olive">
            {tag}
          </span>
        ))}
      </div>
    )}

    {repository && (
      <a
        href={repository}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block mt-3 text-sm text-olive-drab hover:text-dark-olive underline"
      >
        View Repository
      </a>
    )}
  </div>
</article>
